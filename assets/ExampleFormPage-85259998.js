import{D as I,e as B,E as F,w as _e,G as b,H as Ie,d as E,I as Be,o as y,h as L,i as N,j as q,T as Ne,m as l,_ as Pe,c as k,y as P,t as z,k as Te,l as oe,J as $,v as J,K as ve,L as Me,M as je,N as Ue,O as he,P as Je,Q as Re,R as Ge,a as g,n as me,S as We,U as De,V as pe,W as Le,A as H,F as qe,s as ze}from"./index-ede1bf55.js";import{g as He}from"./generateUuid-a2ac6e72.js";const ae=e=>e!==null&&typeof e=="object",ge=e=>e==null,le=e=>e===void 0,Ke=e=>{for(const o in e)if(!le(e[o]))return!1;return!0},Qe=e=>ae(e)&&!Object.keys(e).length,Ze=(e,o)=>{const t=o.slice(0,-1).length;let r=0;for(;r<t;)e=le(e)?r++:e[o[r++]];return e},ee=(e,o,t)=>{let r=-1;const s=o.split("."),d=s.length,m=d-1;for(;++r<d;){const a=s[r];let _=t;if(r!==m){const w=e[a];_=ae(w)||Array.isArray(w)?w:isNaN(+s[r+1])?{}:[]}e[a]=_,e=e[a]}return e},D=(e,o,t)=>{const s=o.split(".").reduce((d,m)=>ge(d)?d:d[m],e);if(!ge(e))return le(s)||s===e?le(e[o])?t:e[o]:s},Ce=(e,o)=>{const t=o.split("."),r=t.length===1?e:Ze(e,t),s=t.length-1,d=t[s];if(r){if(Array.isArray(r))r.splice(+d,1);else if(ae(r)){const m=r[d];Array.isArray(m)||delete r[d]}}return s!==0&&(ae(r)&&Qe(r)||Array.isArray(r)&&Ke(r))&&Ce(e,t.slice(0,-1).join(".")),e},se=()=>{let e="";const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<10;t+=1)e+=o.charAt(Math.floor(Math.random()*o.length));return e},ie=(e,o)=>{const t=I({}),r=B({}),s=B(!1),d=B(!0),m=B(!1),a=B(o?JSON.parse(JSON.stringify(o)):null);o!=null&&Object.assign(t,o);let _=null;const w=F(()=>JSON.stringify(t)!==JSON.stringify(a.value)),R=F(()=>Object.keys(r.value).length===0),C=I(new Map),G=I(new Map),O=I(new Map),te=I(new Map),M=n=>{var c;return((c=[...C.entries()].find(([,u])=>u===n))==null?void 0:c[0])??null},p=n=>{if(!Number.isNaN(n.split(".").pop())){const u=parseInt(n.split(".").pop()??"0",10),i=n.split(".").slice(0,-1).join("."),f=[...C.entries()].filter(([,v])=>v.startsWith(i));for(const[v,A]of f){if(!A.startsWith(`${i}.`))continue;const x=parseInt(A.replace(`${i}.`,""),10);if(x>u){const U=`${i}.${x-1}`,Q=A.slice(U.length);C.set(v,`${U}${Q}`)}else x===u&&C.delete(v)}}else{const u=M(n);C.delete(u)}},j=(n,c=null)=>{const u=C.get(n),i=D(t,u);i==null&&ee(t,u,c);const f=I({_id:n,_path:u,isDirty:!1,isTouched:!1,isChanged:!1,modelValue:i,"onUpdate:modelValue":v=>{const A=v===""?null:v,x=C.get(n)??null;x!==null&&ee(t,x,A)},errors:void 0,onBlur:()=>{f.isTouched=!0},onChange:()=>{f.isChanged=!0},setValue:v=>{f["onUpdate:modelValue"](v)}});return f},ce=n=>{const c=C.get(n),u=D(t,c);u==null&&ee(t,c,[]);const i=I([]);for(let h=0;h<(u==null?void 0:u.length);h++){const S=se();i.push(S)}const f=(h,S)=>{i[h]=se(),K(`${c}.${h}`,S)},v=h=>{const S=C.get(n);i.splice(h,1),W(`${S}.${h}`)},A=h=>{f(0,h)},x=h=>{f(i.length,h)},U=()=>{v(i.length-1)},Q=()=>{v(0)},Ae=(h,S)=>{[i[h],i[S]]=[i[S],i[h]];const ne=C.get(n),Z=D(t,ne),Ee=Z[h];Z[h]=Z[S],Z[S]=Ee,ee(t,ne,Z);const X=`${ne}.${h}`,Y=`${ne}.${S}`,Oe=M(X),Ve=M(Y);for(const[ye,re]of C.entries())if(re.startsWith(X)){const de=re.replace(X,Y);C.set(ye,de)}else if(re.startsWith(Y)){const de=re.replace(Y,X);C.set(ye,de)}C.set(Oe,Y),C.set(Ve,X)},fe=()=>{for(let h=i.length-1;h>=0;h--)v(h)};return I({_id:n,_path:c,isDirty:!1,modelValue:u,errors:void 0,append:x,fields:i,insert:f,pop:U,prepend:A,remove:v,shift:Q,move:Ae,empty:fe,setValue:h=>{fe();for(const S of h)x(S)}})},V=n=>{n._path=F(()=>C.get(n._id)??null);const c=F(()=>n._path==null?null:D(t,n._path));n.modelValue=c,n.errors=F(()=>{if(n._path!=null)return D(r.value,n._path)}),n.isDirty=F(()=>n._path==null?!1:JSON.stringify(n.modelValue)!==JSON.stringify(D(a.value,n._path))),G.set(n._id,c)},K=(n,c)=>{var A;const u=M(n);if(u!=null){const x=O.get(u);if(x==null)throw new Error(`Path ${n} is already registered as a field array`);return(((A=G.get(u))==null?void 0:A.effect.active)??!1)||V(x),x}const i=se();C.set(i,n);const f=j(i,c);V(f),O.set(i,f);const v=n.split(".");for(let x=v.length-1;x>=0;x--){const U=v[x];if(!isNaN(Number(U))){const Q=v.slice(0,x+1).join(".");K(Q)}}return f},ue=n=>{var f;const c=M(n);if(c!=null){const v=te.get(c);if(v==null)throw new Error(`Path ${n} is already registered as a field`);return(((f=G.get(c))==null?void 0:f.effect.active)??!1)||V(v),v}const u=se();C.set(u,n);const i=ce(u);return V(i),te.set(u,i),i},W=n=>{const c=M(n);c!=null&&(p(n),Ce(t,n),O.delete(c),G.delete(c),C.delete(c))},xe=n=>{for(const c in n)ee(t,c,n[c])},Fe=n=>{const c=(u,i)=>{for(const f in i)f==="_errors"?u[f]=i[f]:(u[f]==null&&(u[f]={_errors:[]}),c(u[f],i[f]))};c(r.value,n)},we=()=>{for(const n of O.values())n.onBlur()},Se=async()=>{if(m.value=!0,we(),!R.value)return;if(s.value=!0,_==null)throw new Error("Attempted to submit form but `onSubmitForm` callback is not registered");const n=await(_==null?void 0:_(e.parse(t)));r.value!=null&&Object.assign(r.value,n),s.value=!1,a.value=JSON.parse(JSON.stringify(t))},$e=n=>{_=n};return _e(t,async()=>{try{await e.parseAsync(t),r.value={}}catch(n){n instanceof b.ZodError&&(r.value=n.format())}},{deep:!0,immediate:!0}),{onSubmitForm:$e,form:I({_state:Ie(t),errors:r,isDirty:w,isReady:d,isSubmitting:s,hasAttemptedToSubmit:m,isValid:R,register:K,registerArray:ue,submit:Se,unregister:W,setValues:xe,setErrors:Fe})}},Xe=b.object({username:b.string().min(1),password:b.string().min(1)}),Ye=b.object({username:b.string().min(1),address:b.object({street:b.string().min(1),city:b.string().min(1)})}),et=b.object({password:b.string().min(1)}).and(b.object({username:b.string().min(1)}).or(b.object({email:b.string().email()}))),tt=b.object({addresses:b.array(b.object({street:b.string().min(1)}).and(b.object({number:b.string().min(1)}).or(b.object({postcode:b.string().min(1)}))))}),nt=E({__name:"TransitionExpand",props:{duration:{default:.5}},setup(e){const o=e;Be(m=>({"1ad5c80e":l(t)}));const t=F(()=>`${o.duration}s`),r=m=>{const a=m,_=getComputedStyle(a).width;a.style.width=_,a.style.position="absolute",a.style.visibility="hidden",a.style.height="auto";const w=getComputedStyle(a).height;a.style.width="",a.style.position="",a.style.visibility="",a.style.height="",getComputedStyle(a),requestAnimationFrame(()=>{a.style.height=w})},s=m=>{const a=m;a.style.height="auto"},d=m=>{const a=m,_=getComputedStyle(a).height;a.style.height=_,getComputedStyle(a),requestAnimationFrame(()=>{a.style.height="0"})};return(m,a)=>(y(),L(Ne,{name:"expand",onAfterEnter:s,onEnter:r,onLeave:d},{default:N(()=>[q(m.$slots,"default",{},void 0,!0)]),_:3}))}});const rt=Pe(nt,[["__scopeId","data-v-75dca326"]]),st={class:"text-sm text-destructive"},ot=E({__name:"FormError",props:{errorMessage:{}},setup(e){return(o,t)=>(y(),k("p",st,[q(o.$slots,"default",{},()=>[P(z(o.errorMessage),1)])]))}}),at={key:0,class:"text-xs text-gray-300"},lt=E({inheritAttrs:!1,__name:"FormLabel",props:{isOptional:{type:Boolean,default:!1}},setup(e){const{t:o}=Te();return(t,r)=>(y(),k("div",null,[oe("label",$({class:"text-sm"},t.$attrs),[q(t.$slots,"default")],16),t.isOptional?(y(),k("p",at,z(l(o)("label.optional")),1)):J("",!0)]))}}),ke={default:"border-border",error:"border-destructive",success:"border-success",readonly:"bg-muted text-muted-foreground",disabled:"opacity-60"},it={default:"",back:"rounded-r-none border-r-0",front:"rounded-l-none border-l-0",both:"rounded-l-none border-l-0 rounded-r-none border-r-0"},ct=ve("relative w-full rounded border border-border bg-input px-4 py-2 placeholder:transition-all placeholder:duration-300 focus:placeholder:translate-x-1 focus:placeholder:opacity-0",{variants:{status:ke,extraContent:it},defaultVariants:{status:"default",extraContent:"default"}}),ut={back:"rounded-l-none border-l-0",front:"rounded-r-none border-r-0"},dt={true:"",false:""},be=ve("flex items-center justify-center rounded border border-border bg-input px-4",{variants:{status:ke,extraContentType:ut,extraContentBorder:dt},compoundVariants:[{extraContentBorder:!0,extraContentType:"front",class:"border-r"},{extraContentBorder:!0,extraContentType:"back",class:"border-l"}],defaultVariants:{extraContentType:"back"}}),mt=Symbol("FormGroupContext"),pt=()=>Me(mt,null),ft=({model:e,uuid:o,isDisabled:t,element:r})=>{const s=pt(),d=F(()=>({value:typeof e.value=="number"?e.value:0,disabled:t==null?void 0:t.value})),m=B({id:o,element:r.value,propsRef:d.value}),a=_=>{if(t!=null&&t.value||!s)return;const w=s.change(m,_);e.value=w};_e(()=>e.value,_=>{_&&a(_)}),je(()=>{s&&s.registerOption(m)}),Ue(()=>{s&&s.unregisterOption(o)})},yt={class:"flex items-center justify-between gap-4"},ht={key:0,class:"text-xs text-muted-foreground"},gt={class:"flex"},bt={key:1},_t=["id","disabled","type","placeholder","readonly"],vt={key:3},T=E({__name:"FormInputField",props:he({isSuccess:{type:Boolean,default:!1},isReadOnly:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},isTouched:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1},isCopyable:{type:Boolean,default:!1},isOptional:{type:Boolean},hasExtraContentBorder:{type:Boolean},placeholder:{},type:{default:"text"},label:{},errors:{default:()=>({_errors:[]})},backContent:{},frontContent:{},backIcon:{},frontIcon:{}},{modelValue:{}}),emits:he(["blur"],["update:modelValue"]),setup(e,{emit:o}){const t=Je(e,"modelValue"),r=He(),s=B(),d=Re(),m=F(()=>e.errors._errors.length>0&&(e.isTouched||e.isDirty)),a=F(()=>e.frontContent||d["front-content"]||e.frontIcon),_=F(()=>e.backContent||d["back-content"]||e.backIcon||e.isCopyable||e.type==="password"),w=F(()=>a.value&&_.value?"both":a.value?"front":_.value?"back":"default"),R=F(()=>m.value?"error":e.isSuccess?"success":e.isReadOnly?"readonly":e.isDisabled?"disabled":"default"),C=F(()=>{var p;return((p=t.value)==null?void 0:p.toString())??""}),{copy:G}=Ge();e.type==="number"&&ft({model:t,element:s,uuid:r,isDisabled:F(()=>e.isDisabled)});const O=B(!1),te=()=>{O.value=!O.value},M=F(()=>e.type==="password"&&O.value?"text":e.type);return(p,j)=>{const ce=lt,V=Le,K=ot,ue=rt;return y(),k("div",{ref_key:"element",ref:s},[oe("div",yt,[g(ce,{for:l(r)},{default:N(()=>[q(p.$slots,"label",{},()=>[P(z(p.label),1)])]),_:3},8,["for"]),p.isOptional?(y(),k("p",ht," Optional ")):J("",!0)]),oe("div",gt,[l(a)?(y(),k("div",{key:0,class:me(l(pe)(l(be)({extraContentType:"front",status:l(R),extraContentBorder:p.hasExtraContentBorder})))},[q(p.$slots,"front-content",{},()=>[p.frontIcon?(y(),L(V,{key:0,icon:p.frontIcon},null,8,["icon"])):p.frontContent?(y(),k("div",bt,z(p.frontContent),1)):J("",!0)])],2)):J("",!0),We(oe("input",{id:l(r),"onUpdate:modelValue":j[0]||(j[0]=W=>t.value=W),disabled:p.isDisabled,type:l(M),min:"0",class:me(l(pe)(l(ct)({status:l(R),extraContent:l(w)}))),placeholder:p.placeholder,readonly:p.isReadOnly,onBlur:j[1]||(j[1]=W=>o("blur"))},null,42,_t),[[De,t.value]]),l(_)?(y(),k("div",{key:1,class:me(l(pe)(l(be)({extraContentType:"back",status:l(R),extraContentBorder:p.hasExtraContentBorder})))},[q(p.$slots,"back-content",{},()=>[p.type==="password"?(y(),k("button",{key:0,onClick:te},[l(O)?(y(),L(V,{key:0,icon:"eyeClosed"})):(y(),L(V,{key:1,icon:"eyeOpen"}))])):p.isCopyable?(y(),k("button",{key:1,onClick:j[2]||(j[2]=W=>l(G)(l(C)))}," Copy ")):p.backIcon?(y(),L(V,{key:2,icon:p.backIcon},null,8,["icon"])):p.backContent?(y(),k("div",vt,z(p.backContent),1)):J("",!0)])],2)):J("",!0)]),g(ue,{duration:.2},{default:N(()=>[l(m)?(y(),L(K,{key:0,"error-message":p.errors._errors[0]},null,8,["error-message"])):J("",!0)]),_:1})],512)}}}),Ct=E({__name:"ExampleConditionalForm",setup(e){const o=s=>{console.log(s)},{form:t,onSubmitForm:r}=ie(et);return r(s=>(o(s),null)),(s,d)=>(y(),k("div",null,[g(T,$(l(t).register("username"),{label:"Username"}),null,16),g(T,$(l(t).register("email"),{label:"email"}),null,16),g(T,$(l(t).register("password"),{label:"password"}),null,16),g(H,{"onComponent:click":l(r)},{default:N(()=>[P(" Submit ")]),_:1},8,["onComponent:click"])]))}}),kt=E({__name:"ExampleNestedForm",setup(e){const o=s=>{console.log(s)},{form:t,onSubmitForm:r}=ie(Ye);return r(s=>(o(s),null)),(s,d)=>(y(),k("div",null,[g(T,$(l(t).register("username"),{label:"Username"}),null,16),g(T,$(l(t).register("address.city"),{label:"Stad"}),null,16),g(T,$(l(t).register("address.street"),{label:"Straat"}),null,16),g(H,{"onComponent:click":l(t).submit},{default:N(()=>[P(" Submit ")]),_:1},8,["onComponent:click"])]))}}),xt=E({__name:"ExampleSimpleForm",setup(e){const o=s=>{console.log(s)},{form:t,onSubmitForm:r}=ie(Xe);return r(s=>(o(s),null)),(s,d)=>(y(),k("div",null,[g(T,$(l(t).register("username"),{label:"Username"}),null,16),g(T,$(l(t).register("password"),{label:"Wachtwoord"}),null,16),g(H,{"onComponent:click":l(t).submit},{default:N(()=>[P(" Submit ")]),_:1},8,["onComponent:click"])]))}}),Ft=E({__name:"ExampleArrayFormComponent",props:{index:{},form:{}},setup(e){const o=e;return(t,r)=>{const s=T;return y(),k("div",null,[P(" Address "+z(t.index)+" ",1),g(s,$(o.form.register(`addresses.${t.index}.street`),{label:"street"}),null,16),g(s,$(o.form.register(`addresses.${t.index}.number`),{label:"number"}),null,16),g(s,$(o.form.register(`addresses.${t.index}.postcode`),{label:"postcode"}),null,16)])}}}),wt=E({__name:"ExampleArrayForm",setup(e){const o=a=>{console.log(a)},t=B(1),r=()=>{t.value+=1},s=()=>{t.value-=1},{form:d,onSubmitForm:m}=ie(tt);return m(a=>(o(a),null)),(a,_)=>(y(),k("div",null,[(y(!0),k(qe,null,ze(l(t),w=>(y(),k("div",{key:w},[g(Ft,{index:w-1,form:l(d)},null,8,["index","form"])]))),128)),g(H,{"onComponent:click":r},{default:N(()=>[P(" add ")]),_:1}),g(H,{"onComponent:click":s},{default:N(()=>[P(" remove ")]),_:1}),g(H,{"onComponent:click":l(m)},{default:N(()=>[P(" Submit ")]),_:1},8,["onComponent:click"])]))}}),St={class:"flex flex-col gap-8"},Vt=E({__name:"ExampleFormPage",setup(e){return(o,t)=>{const r=xt,s=kt,d=Ct;return y(),k("div",St,[g(r),g(s),g(d),g(wt)])}}});export{Vt as default};
