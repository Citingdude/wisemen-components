import{D as E,e as P,E as A,w as me,G as y,H as Ae,d as C,I as Ce,o as F,h as Ee,i as N,j,T as Ne,m,_ as Oe,c as $,y as O,t as q,k as Ve,l as Y,J as S,v as ee,K as Pe,L as Ie,M as Te,N as ue,O as Be,P as Me,a as h,n as Z,Q as Ue,R as je,A as J,F as Je,s as Re}from"./index-4f486ab0.js";import{g as Ge}from"./generateUuid-a2ac6e72.js";const te=t=>t!==null&&typeof t=="object",de=t=>t==null,ne=t=>t===void 0,Le=t=>{for(const o in t)if(!ne(t[o]))return!1;return!0},We=t=>te(t)&&!Object.keys(t).length,De=(t,o)=>{const e=o.slice(0,-1).length;let r=0;for(;r<e;)t=ne(t)?r++:t[o[r++]];return t},D=(t,o,e)=>{let r=-1;const s=o.split("."),u=s.length,p=u-1;for(;++r<u;){const l=s[r];let i=e;if(r!==p){const x=t[l];i=te(x)||Array.isArray(x)?x:isNaN(+s[r+1])?{}:[]}t[l]=i,t=t[l]}return t},U=(t,o,e)=>{const s=o.split(".").reduce((u,p)=>de(u)?u:u[p],t);if(!de(t))return ne(s)||s===t?ne(t[o])?e:t[o]:s},pe=(t,o)=>{const e=o.split("."),r=e.length===1?t:De(t,e),s=e.length-1,u=e[s];if(r){if(Array.isArray(r))r.splice(+u,1);else if(te(r)){const p=r[u];Array.isArray(p)||delete r[u]}}return s!==0&&(te(r)&&We(r)||Array.isArray(r)&&Le(r))&&pe(t,e.slice(0,-1).join(".")),t},X=()=>{let t="";const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let e=0;e<10;e+=1)t+=o.charAt(Math.floor(Math.random()*o.length));return t},re=(t,o)=>{const e=E({}),r=P({}),s=P(!1),u=P(!0),p=P(!1),l=P(o?JSON.parse(JSON.stringify(o)):null);o!=null&&Object.assign(e,o);let i=null;const x=A(()=>JSON.stringify(e)!==JSON.stringify(l.value)),z=A(()=>Object.keys(r.value).length===0),b=E(new Map),B=E(new Map),I=E(new Map),le=E(new Map),M=n=>{var c;return((c=[...b.entries()].find(([,d])=>d===n))==null?void 0:c[0])??null},fe=n=>{if(!Number.isNaN(n.split(".").pop())){const d=parseInt(n.split(".").pop()??"0",10),a=n.split(".").slice(0,-1).join("."),f=[...b.entries()].filter(([,_])=>_.startsWith(a));for(const[_,w]of f){if(!w.startsWith(`${a}.`))continue;const v=parseInt(w.replace(`${a}.`,""),10);if(v>d){const T=`${a}.${v-1}`,R=w.slice(T.length);b.set(_,`${T}${R}`)}else v===d&&b.delete(_)}}else{const d=M(n);b.delete(d)}},he=(n,c=null)=>{const d=b.get(n),a=U(e,d);a==null&&D(e,d,c);const f=E({_id:n,_path:d,isDirty:!1,isTouched:!1,isChanged:!1,modelValue:a,"onUpdate:modelValue":_=>{const w=_===""?null:_,v=b.get(n)??null;v!==null&&D(e,v,w)},errors:void 0,onBlur:()=>{f.isTouched=!0},onChange:()=>{f.isChanged=!0},setValue:_=>{f["onUpdate:modelValue"](_)}});return f},ge=n=>{const c=b.get(n),d=U(e,c);d==null&&D(e,c,[]);const a=E([]);for(let g=0;g<(d==null?void 0:d.length);g++){const k=X();a.push(k)}const f=(g,k)=>{a[g]=X(),se(`${c}.${g}`,k)},_=g=>{const k=b.get(n);a.splice(g,1),ae(`${k}.${g}`)},w=g=>{f(0,g)},v=g=>{f(a.length,g)},T=()=>{_(a.length-1)},R=()=>{_(0)},$e=(g,k)=>{[a[g],a[k]]=[a[k],a[g]];const K=b.get(n),G=U(e,K),ke=G[g];G[g]=G[k],G[k]=ke,D(e,K,G);const L=`${K}.${g}`,W=`${K}.${k}`,Se=M(L),we=M(W);for(const[ce,Q]of b.entries())if(Q.startsWith(L)){const oe=Q.replace(L,W);b.set(ce,oe)}else if(Q.startsWith(W)){const oe=Q.replace(W,L);b.set(ce,oe)}b.set(Se,W),b.set(we,L)},ie=()=>{for(let g=a.length-1;g>=0;g--)_(g)};return E({_id:n,_path:c,isDirty:!1,modelValue:d,errors:void 0,append:v,fields:a,insert:f,pop:T,prepend:w,remove:_,shift:R,move:$e,empty:ie,setValue:g=>{ie();for(const k of g)v(k)}})},H=n=>{n._path=A(()=>b.get(n._id)??null);const c=A(()=>n._path==null?null:U(e,n._path));n.modelValue=c,n.errors=A(()=>{if(n._path!=null)return U(r.value,n._path)}),n.isDirty=A(()=>n._path==null?!1:JSON.stringify(n.modelValue)!==JSON.stringify(U(l.value,n._path))),B.set(n._id,c)},se=(n,c)=>{var w;const d=M(n);if(d!=null){const v=I.get(d);if(v==null)throw new Error(`Path ${n} is already registered as a field array`);return(((w=B.get(d))==null?void 0:w.effect.active)??!1)||H(v),v}const a=X();b.set(a,n);const f=he(a,c);H(f),I.set(a,f);const _=n.split(".");for(let v=_.length-1;v>=0;v--){const T=_[v];if(!isNaN(Number(T))){const R=_.slice(0,v+1).join(".");se(R)}}return f},ye=n=>{var f;const c=M(n);if(c!=null){const _=le.get(c);if(_==null)throw new Error(`Path ${n} is already registered as a field`);return(((f=B.get(c))==null?void 0:f.effect.active)??!1)||H(_),_}const d=X();b.set(d,n);const a=ge(d);return H(a),le.set(d,a),a},ae=n=>{const c=M(n);c!=null&&(fe(n),pe(e,n),I.delete(c),B.delete(c),b.delete(c))},_e=n=>{for(const c in n)D(e,c,n[c])},be=n=>{const c=(d,a)=>{for(const f in a)f==="_errors"?d[f]=a[f]:(d[f]==null&&(d[f]={_errors:[]}),c(d[f],a[f]))};c(r.value,n)},ve=()=>{for(const n of I.values())n.onBlur()},xe=async()=>{if(p.value=!0,ve(),!z.value)return;if(s.value=!0,i==null)throw new Error("Attempted to submit form but `onSubmitForm` callback is not registered");const n=await(i==null?void 0:i(t.parse(e)));r.value!=null&&Object.assign(r.value,n),s.value=!1,l.value=JSON.parse(JSON.stringify(e))},Fe=n=>{i=n};return me(e,async()=>{try{await t.parseAsync(e),r.value={}}catch(n){n instanceof y.ZodError&&(r.value=n.format())}},{deep:!0,immediate:!0}),{onSubmitForm:Fe,form:E({_state:Ae(e),errors:r,isDirty:x,isReady:u,isSubmitting:s,hasAttemptedToSubmit:p,isValid:z,register:se,registerArray:ye,submit:xe,unregister:ae,setValues:_e,setErrors:be})}},qe=y.object({username:y.string().min(1),password:y.string().min(1)}),ze=y.object({username:y.string().min(1),address:y.object({street:y.string().min(1),city:y.string().min(1)})}),He=y.object({password:y.string().min(1)}).and(y.object({username:y.string().min(1)}).or(y.object({email:y.string().email()}))),Ke=y.object({addresses:y.array(y.object({street:y.string().min(1)}).and(y.object({number:y.string().min(1)}).or(y.object({postcode:y.string().min(1)}))))}),Qe=C({__name:"TransitionExpand",props:{duration:{default:.5}},setup(t){const o=t;Ce(p=>({"1ad5c80e":m(e)}));const e=A(()=>`${o.duration}s`),r=p=>{const l=p,i=getComputedStyle(l).width;l.style.width=i,l.style.position="absolute",l.style.visibility="hidden",l.style.height="auto";const x=getComputedStyle(l).height;l.style.width="",l.style.position="",l.style.visibility="",l.style.height="",getComputedStyle(l),requestAnimationFrame(()=>{l.style.height=x})},s=p=>{const l=p;l.style.height="auto"},u=p=>{const l=p,i=getComputedStyle(l).height;l.style.height=i,getComputedStyle(l),requestAnimationFrame(()=>{l.style.height="0"})};return(p,l)=>(F(),Ee(Ne,{name:"expand",onAfterEnter:s,onEnter:r,onLeave:u},{default:N(()=>[j(p.$slots,"default",{},void 0,!0)]),_:3}))}});const Ze=Oe(Qe,[["__scopeId","data-v-75dca326"]]),Xe={class:"text-danger-500 text-sm"},Ye=C({__name:"FormError",props:{errorMessage:{}},setup(t){return(o,e)=>(F(),$("p",Xe,[j(o.$slots,"default",{},()=>[O(q(o.errorMessage),1)])]))}}),et={key:0,class:"text-xs text-gray-300"},tt=C({inheritAttrs:!1,__name:"FormLabel",props:{isOptional:{type:Boolean,default:!1}},setup(t){const{t:o}=Ve();return(e,r)=>(F(),$("div",null,[Y("label",S({class:"text-sm"},e.$attrs),[j(e.$slots,"default")],16),e.isOptional?(F(),$("p",et,q(m(o)("label.optional")),1)):ee("",!0)]))}}),nt=Symbol("FormGroupContext"),rt=()=>Pe(nt,null),st=({model:t,uuid:o,isDisabled:e,element:r})=>{const s=rt(),u=A(()=>({value:typeof t.value=="number"?t.value:0,disabled:e==null?void 0:e.value})),p=P({id:o,element:r.value,propsRef:u.value}),l=i=>{if(e!=null&&e.value||!s)return;const x=s.change(p,i);t.value=x};me(()=>t.value,i=>{i&&l(i)}),Ie(()=>{s&&s.registerOption(p)}),Te(()=>{s&&s.unregisterOption(o)})},ot={class:"flex"},lt=["id","disabled","type","placeholder","readonly"],V=C({__name:"FormInputField",props:ue({hasSuccess:{type:Boolean,default:!1},isReadOnly:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},isTouched:{type:Boolean,default:!1},isDirty:{type:Boolean,default:!1},placeholder:{},unit:{},type:{default:"text"},label:{},errors:{default:()=>({_errors:[]})}},{modelValue:{}}),emits:ue(["blur"],["update:modelValue"]),setup(t,{emit:o}){const e=Be(t,"modelValue"),r=Ge(),s=P(),u=Me(),p=A(()=>t.errors._errors.length>0&&(t.isTouched||t.isDirty)),l=A(()=>p.value?"border-danger-500":t.hasSuccess?"border-success-500":t.isReadOnly?"border-gray-300":"border-primary-500");return t.type==="number"&&st({model:e,element:s,uuid:r,isDisabled:A(()=>t.isDisabled)}),(i,x)=>{const z=tt,b=Ye,B=Ze;return F(),$("div",{ref_key:"element",ref:s},[h(z,{for:m(r)},{default:N(()=>[j(i.$slots,"label",{},()=>[O(q(i.label),1)])]),_:3},8,["for"]),Y("div",ot,[m(u)["front-content"]?(F(),$("div",{key:0,class:Z(["flex rounded rounded-r-none border bg-gray-200 px-4",m(l)])},[j(i.$slots,"front-content")],2)):ee("",!0),Y("div",{class:Z(["flex h-full rounded border",[m(l),{"rounded-l-none border-l-0":m(u)["front-content"],"rounded-r-none border-r-0":m(u)["back-content"]}]])},[Ue(Y("input",{id:m(r),"onUpdate:modelValue":x[0]||(x[0]=I=>e.value=I),disabled:i.isDisabled,type:i.type,min:"0",class:"relative w-full rounded px-4 py-2 placeholder:transition-all placeholder:duration-300 focus:placeholder:translate-x-1 focus:placeholder:opacity-0",placeholder:i.placeholder,readonly:i.isReadOnly,onBlur:x[1]||(x[1]=I=>o("blur"))},null,40,lt),[[je,e.value]]),i.unit?(F(),$("div",{key:0,class:Z([[m(l),{"rounded-r-none border-r-0":m(u)["back-content"]}],"flex min-w-max items-center rounded rounded-l-none border-l bg-white px-3 text-primary-500"])},q(i.unit),3)):ee("",!0)],2),m(u)["back-content"]?(F(),$("div",{key:1,class:Z(["flex rounded rounded-l-none border bg-gray-200 px-4",m(l)])},[j(i.$slots,"back-content")],2)):ee("",!0)]),h(B,{duration:.2},{default:N(()=>[h(b,{"error-message":i.errors._errors[0]},null,8,["error-message"])]),_:1})],512)}}}),at=C({__name:"ExampleConditionalForm",setup(t){const o=s=>{console.log(s)},{form:e,onSubmitForm:r}=re(He);return r(s=>(o(s),null)),(s,u)=>(F(),$("div",null,[h(V,S(m(e).register("username"),{label:"Username"}),null,16),h(V,S(m(e).register("email"),{label:"email"}),null,16),h(V,S(m(e).register("password"),{label:"password"}),null,16),h(J,{"onComponent:click":m(r)},{default:N(()=>[O(" Submit ")]),_:1},8,["onComponent:click"])]))}}),it=C({__name:"ExampleNestedForm",setup(t){const o=s=>{console.log(s)},{form:e,onSubmitForm:r}=re(ze);return r(s=>(o(s),null)),(s,u)=>(F(),$("div",null,[h(V,S(m(e).register("username"),{label:"Username"}),null,16),h(V,S(m(e).register("address.city"),{label:"Stad"}),null,16),h(V,S(m(e).register("address.street"),{label:"Straat"}),null,16),h(J,{"onComponent:click":m(e).submit},{default:N(()=>[O(" Submit ")]),_:1},8,["onComponent:click"])]))}}),ct=C({__name:"ExampleSimpleForm",setup(t){const o=s=>{console.log(s)},{form:e,onSubmitForm:r}=re(qe);return r(s=>(o(s),null)),(s,u)=>(F(),$("div",null,[h(V,S(m(e).register("username"),{label:"Username"}),null,16),h(V,S(m(e).register("password"),{label:"Wachtwoord"}),null,16),h(J,{"onComponent:click":m(e).submit},{default:N(()=>[O(" Submit ")]),_:1},8,["onComponent:click"])]))}}),ut=C({__name:"ExampleArrayFormComponent",props:{index:{},form:{}},setup(t){const o=t;return(e,r)=>{const s=V;return F(),$("div",null,[O(" Address "+q(e.index)+" ",1),h(s,S(o.form.register(`addresses.${e.index}.street`),{label:"street"}),null,16),h(s,S(o.form.register(`addresses.${e.index}.number`),{label:"number"}),null,16),h(s,S(o.form.register(`addresses.${e.index}.postcode`),{label:"postcode"}),null,16)])}}}),dt=C({__name:"ExampleArrayForm",setup(t){const o=l=>{console.log(l)},e=P(1),r=()=>{e.value+=1},s=()=>{e.value-=1},{form:u,onSubmitForm:p}=re(Ke);return p(l=>(o(l),null)),(l,i)=>(F(),$("div",null,[(F(!0),$(Je,null,Re(m(e),x=>(F(),$("div",{key:x},[h(ut,{index:x-1,form:m(u)},null,8,["index","form"])]))),128)),h(J,{"onComponent:click":r},{default:N(()=>[O(" add ")]),_:1}),h(J,{"onComponent:click":s},{default:N(()=>[O(" remove ")]),_:1}),h(J,{"onComponent:click":m(p)},{default:N(()=>[O(" Submit ")]),_:1},8,["onComponent:click"])]))}}),mt={class:"flex flex-col gap-8"},yt=C({__name:"ExampleFormPage",setup(t){return(o,e)=>{const r=ct,s=it,u=at;return F(),$("div",mt,[h(r),h(s),h(u),h(dt)])}}});export{yt as default};
